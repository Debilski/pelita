<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head><meta content="text/html; charset=UTF-8" http-equiv="content-type" /><title>Pelita</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="processing-1.3.6.min.js"></script> 
  </head>
  <body>
    <div id="main">

      <script type="text/javascript">
        var agents = Array();
      </script>


      <h1><span id="team_0"><span class="name">Team</span> <span class="score"></span></span> :
        <span id="team_1"><span class="score"></span> <span class="name">Team</span></span></h1>

      <p>Round: <span id="round_index"></span>; Last bot: <span id="bot_id"></span></p>

      <canvas id="canvas1" data-processing-sources="pelita.pde"></canvas>


        <script type="text/javascript">

          var ws = new WebSocket("ws://localhost:51011/");
          ws.onmessage = function(event) { 
            data = JSON.parse(event.data);
            wall = data.walls;
            food = data.food;
            state = data.state;
            teams = data.teams;

            init_game();

            $("#team_0 .name").text(teams[0].name);
            $("#team_0 .score").text(teams[0].score);
            $("#team_1 .name").text(teams[1].name);
            $("#team_1 .score").text(teams[1].score);

            $("#round_index").text(state.round_index);
            $("#bot_id").text(state.bot_id);

            for (idx = 0; idx < data.bots.length; idx++) {
              agents[idx].setNext(data.bots[idx].x, data.bots[idx].y);
            }
          }

        function up(num) {
        if (agents[num]) agents[num].up();
        }
        function down(num) {
        if (agents[num]) agents[num].down();
        }
        function left(num) {
        if (agents[num]) agents[num].left();
        }
        function right(num) {
        if (agents[num]) agents[num].right();
        }
      </script>

      <form name="Formular" action="">
        <input type="button" value=" ∧ " onclick="up(2)" />
        <input type="button" value=" ∨ " onclick="down(2)" />
        <input type="button" value=" &lt; " onclick="left(2)" />
        <input type="button" value=" &gt; " onclick="right(2)" />
      </form>


    </div>
  </body>
</html>

